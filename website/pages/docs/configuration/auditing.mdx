---
layout: docs
page_title: audit Stanza - Agent Configuration
sidebar_title: audit
description: >-
  The "audit" stanza configures the Nomad agent to configure Audit Logging
  behavior. This is an Enterprise-only feature.
---

# `audit` Stanza

<Placement groups={['audit']} />

The `audit` stanza configures the Nomad agent to configure Audit logging behavior.

```hcl
audit {
  enabled = true
}
```

## `audit` Parameters

- `enabled` `(bool: false)` = Specifies if audit logging should be enabled.
  When enabled, audit logging will occur for every request, unless it is
  filtered by a `filter`.

- `sink` <code>([sink](#sink-stanza): default)</code> - Configures a sink
  for audit logs to be sent to.

- `filter` <code>([filter](#filter-stanza): nil)</code> - Configures a filter
  to exclude matching events from being sent to audit logging sinks.

### `sink` Stanza

The `sink` stanza is used to make make audit logging sinks for events to be 
sent to. Currently only a single sink is supported.

The key of the stanza corresponds to the name of the sink which is only used 
for logging purposes

```hcl
  sink "audit" {
    type               = "file"
    delivery_guarantee = "enforced"
    format             = "json"
    path               = "/var/lib/nomad/audit/audit.log"
    rotate_bytes       = 100
    rotate_duration    = "24h"
    rotate_max_files   = 10
  }
```

#### `sink` Parameters

- `type` `(string: "file", required)` - Specifies the type of sink to create.
  Currently only `"file"` type is supported.

- `delivery_guarantee` `(string: "enforced", required)` - Specifies the 
  delivery guarantee that will be made for each audit log entry. Available
  options are `"enforced"` and `"best-effort"`. `"enforced"` will prevent
  hault request execution if the audit log event fails to be written it's sink.
  `"best-effort"` will not hault request execution, meaning a request could
  potentially be un-audited.

- `format` `(string: "json", required)` - Specifies the output format to be 
  sent to a sink. Currently only `"json"` format is supported.

- `path` `(string: "$DATA_DIR/audit/audit.log")` - Specifies the path and file
  name to use for the audit log. By default Nomad will use it's configured 
  [`data_dir`](/docs/configuration#data_dir) for a combined path of 
  `/data_dir/audit/audit.log`. If `rotate_bytes` or `rotate_duration` are set
  file rotation will occur. In this case the filename will be post-fixed with
  `"filename-{timestamp}.log"`

- `rotate_bytes` `(int: 0)` - Specifies the number of bytes that should be
  written to an audit log before it needs to be rotated. Unless specified,
  there is no limit to the number of bytes that can be written to a log file.

- `rotate_duration` `(duration: "24h")` - Specifies the maximum duration a
  audit log should be written to before it needs to be rotated. Must be a
  duration value such as 30s.

- `rotate_max_files` `(int: 0)` - Specifies the maximum number of older log
  file archives to keep. If 0 no files are ever deleted.

### `filter` Stanza
